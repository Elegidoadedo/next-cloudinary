"use strict";var Ut=Object.create;var re=Object.defineProperty;var $t=Object.getOwnPropertyDescriptor;var qt=Object.getOwnPropertyNames;var Dt=Object.getPrototypeOf,Rt=Object.prototype.hasOwnProperty;var Nt=(t,e)=>{for(var r in e)re(t,r,{get:e[r],enumerable:!0})},Ne=(t,e,r,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of qt(e))!Rt.call(t,o)&&o!==r&&re(t,o,{get:()=>e[o],enumerable:!(i=$t(e,o))||i.enumerable});return t};var I=(t,e,r)=>(r=t!=null?Ut(Dt(t)):{},Ne(e||!t||!t.__esModule?re(r,"default",{value:t,enumerable:!0}):r,t)),Vt=t=>Ne(re({},"__esModule",{value:!0}),t);var qr={};Nt(qr,{CldImage:()=>Ue,CldOgImage:()=>$e,CldUploadButton:()=>qe,CldUploadWidget:()=>ee,CldVideoPlayer:()=>De,cloudinaryLoader:()=>ve});module.exports=Vt(qr);var xe=I(require("react")),Tt=I(require("next/image"));var jt=/\/v\d+\//,Mt=/https?:\/\/(?<host>[^\/]+)\/(?<cloudName>[^\/]+)\/(?<assetType>image|images|video|videos|raw|files)\/(?<deliveryType>upload|fetch|private|authenticated|sprite|facebook|twitter|youtube|vimeo)?\/?(?<signature>s\-\-[a-zA-Z0-9]+\-\-)?\/?(?<transformations>(?:[^_\/]+_[^,\/]+,?\/?)*\/)*(?<version>v\d+|\w{1,2})\/(?<publicId>[^\.^\s]+)(?<format>\.[a-zA-Z0-9]+$)?$/,kt=["images","videos","files"];function Ce(t){var e,r,i,o;if(typeof t!="string")throw new Error(`Failed to parse URL: Invalid src of type ${typeof t}`);if(!jt.test(t))throw new Error("Invalid src: Does not include version (Ex: /v1234/)");let[n,l]=t.split("?"),s=n.match(Mt),f=(r=(e=s==null?void 0:s.groups)==null?void 0:e.transformations)==null?void 0:r.split("/").filter(c=>!!c),d={...s==null?void 0:s.groups,seoSuffix:void 0,transformations:f||[],queryParams:{},version:(i=s==null?void 0:s.groups)!=null&&i.version?parseInt(s.groups.version.replace("v","")):void 0};if(l&&(d.queryParams=l.split("&").reduce((c,U)=>{let[_,$]=U.split("=");return c[_]=$,c},{})),d.assetType&&kt.includes(d.assetType)){let c=((o=d.publicId)==null?void 0:o.split("/"))||[];d.seoSuffix=c.pop(),d.publicId=c.join("/")}return d}function Ve(t){let{transformations:e=[]}=Ce(t)||{};return e.map(r=>r.split(","))}function je(t){if(typeof btoa=="function")return btoa(t);if(typeof Buffer!="undefined")return Buffer.from(t).toString("base64")}function T(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Me(t=[],e,r="asc"){function i(a,n){let l=a[e],s=n[e];return typeof l=="string"&&(l=l.toLowerCase()),typeof s=="string"&&(s=s.toLowerCase()),l<s?-1:l>s?1:0}let o=[...t];return typeof e!="string"?o:(o=o.sort(i),r==="desc"?o.reverse():o)}function Ft(t){return!(typeof t!="object"||t instanceof Array)}var we=class{filterOutNonSupportedKeys(e,r){let i=Object.create({});return Ft(e)?(Object.keys(e).forEach(o=>{r.indexOf(o)>=0?i[o]=e[o]:console.warn("Warning - unsupported key provided to configuration: ",o)}),i):Object.create({})}},ke=we;var Oe=["cname","secureDistribution","privateCdn","signUrl","longUrlSignature","shorten","useRootPath","secure","forceVersion","analytics"];var X=class extends ke{constructor(e){super();let r=this.filterOutNonSupportedKeys(e,Oe);Object.assign(this,{secure:!0},r)}extend(e){let r=this.filterOutNonSupportedKeys(e,Oe);return new X(Object.assign({},this,r))}setCname(e){return this.cname=e,this}setSecureDistribution(e){return this.secureDistribution=e,this}setPrivateCdn(e){return this.privateCdn=e,this}setSignUrl(e){return this.signUrl=e,this}setLongUrlSignature(e){return this.longUrlSignature=e,this}setShorten(e){return this.shorten=e,this}setUseRootPath(e){return this.useRootPath=e,this}setSecure(e){return this.secure=e,this}setForceVersion(e){return this.forceVersion=e,this}},Fe=X;var S=class{constructor(e){this.values=[],this.delimiter=":",this.hasValue(e)&&this.addValue(e)}toString(){return this.values.join(this.delimiter)}hasValue(e){return typeof e!="undefined"&&e!==null&&e!==""}addValue(e){return Array.isArray(e)?this.values=this.values.concat(e):this.values.push(e),this.values=this.values.filter(r=>this.hasValue(r)),this}setDelimiter(e){return this.delimiter=e,this}};var Ee=class extends Error{constructor(e="Unsupported"){super(e)}};function z(t){return new Ee(t)}function ze(){return this._qualifierModel||{error:z(`unsupported qualifier ${this.constructor.name}`)}}var ie=class{constructor(){this._qualifierModel={}}toJson(){return ze.apply(this)}};var D=class extends ie{constructor(e,r){super(),this.delimiter="_",this.key=e,r instanceof S?this.qualifierValue=r:(this.qualifierValue=new S,this.qualifierValue.addValue(r))}toString(){let{key:e,delimiter:r,qualifierValue:i}=this;return`${e}${r}${i.toString()}`}addValue(e){return this.qualifierValue.addValue(e),this}};var C=class extends D{constructor(e,r){let i;r?i=new S([e,`${r}`]).setDelimiter(":"):i=e,super("fl",i),this.flagValue=r}toString(){return super.toString().replace(/\./,"%2E")}getFlagValue(){return this.flagValue}};function We(t,e){let r=Array.from(t.entries());return e.forEach(i=>{r.push(["fl",i])}),r.sort().map(i=>i[1])}function Ye(){return this._actionModel&&Object.keys(this._actionModel).length?this._actionModel:{error:z(`unsupported action ${this.constructor.name}`)}}var oe=class{constructor(){this._actionModel={}}toJson(){return Ye.apply(this)}};var N=class extends oe{constructor(){super(...arguments),this.qualifiers=new Map,this.flags=[],this.delimiter=",",this.actionTag=""}prepareQualifiers(){}getActionTag(){return this.actionTag}setActionTag(e){return this.actionTag=e,this}toString(){return this.prepareQualifiers(),We(this.qualifiers,this.flags).join(this.delimiter)}addQualifier(e){if(typeof e=="string"){let[r,i]=e.toLowerCase().split("_");r==="fl"?this.flags.push(new C(i)):this.qualifiers.set(r,new D(r,i))}else this.qualifiers.set(e.key,e);return this}addFlag(e){return typeof e=="string"?this.flags.push(new C(e)):e instanceof C&&this.flags.push(e),this}addValueToQualifier(e,r){return this.qualifiers.get(e).addValue(r),this}};var ne=class extends N{constructor(e){super(),this.addQualifier(new D("b",new S(e).setDelimiter("_")))}};function Be(t){return t&&(t.match(/^#/)?`rgb:${t.substr(1)}`:t)}var Q=class{constructor(e){this.raw=e}toString(){return this.raw}toJson(){return{error:z(`unsupported action ${this.constructor.name}`)}}};function He(t){let e=t;return"error"in e&&!!e.error}function Ke(){return new C("lossy")}function Xe(){return new C("preserve_transparency")}function Qe(t){return new C("progressive",t)}var se=class extends S{constructor(e){super(e),this.val=e}getValue(){return this.val}};function V(t){let e={};return Object.keys(t).forEach(r=>{e[t[r]]=r}),e}var zt={limitFit:"limit",limitFill:"lfill",minimumFit:"mfit",thumbnail:"thumb",limitPad:"lpad",minimumPad:"mpad"},Wt={colorSpace:"cs",dpr:"dpr",density:"dn",defaultImage:"d",format:"f",quality:"q"},Yt={redEye:"redeye",advancedRedEye:"adv_redeye",oilPaint:"oil_paint",unsharpMask:"unsharp_mask",makeTransparent:"make_transparent"},Bt={autoBest:"auto:best",autoEco:"auto:eco",autoGood:"auto:good",autoLow:"auto:low",jpegminiHigh:"jpegmini:1",jpegminiMedium:"jpegmini:2",jpegminiBest:"jpegmini:0"},Ht={fullHd:"full_hd",fullHdWifi:"full_hd_wifi",fullHdLean:"full_hd_lean",hdLean:"hd_lean"},Kt={444:"CHROMA_444",420:"CHROMA_420"},Xt={noCmyk:"no_cmyk",keepCmyk:"keep_cmyk",tinySrgb:"tinysrgb",srgbTrueColor:"srgb:truecolor"};var Ei=V(Kt),bi=V(Xt),Ti=V(zt),Ge=V(Wt),Ai=V(Yt),Pi=V(Bt),Ii=V(Ht);var ae=class extends N{constructor(e,r,i){super(),this._actionModel={};let o;r instanceof se?o=r.getValue():o=r,this._actionModel.actionType=Ge[e],this._actionModel[i]=o,this.addQualifier(new D(e,r))}};var le=class extends C{constructor(e){super("progressive",e)}};var j=class extends ae{constructor(e,r){super(e,r,"formatType")}lossy(){return this._actionModel.lossy=!0,this.addFlag(Ke()),this}progressive(e){return e instanceof le?(this._actionModel.progressive={mode:e.getFlagValue()},this.addFlag(e)):(this._actionModel.progressive={mode:e},this.addFlag(Qe(e))),this}preserveTransparency(){return this._actionModel.preserveTransparency=!0,this.addFlag(Xe()),this}static fromJson(e){let{formatType:r,lossy:i,progressive:o,preserveTransparency:a}=e,n;return r?n=new this("f",r):n=new this("f"),o&&(o.mode?n.progressive(o.mode):n.progressive()),i&&n.lossy(),a&&n.preserveTransparency(),n}};var M=class{constructor(){this.actions=[]}addAction(e){let r;if(typeof e=="string"){if(e.indexOf("/")>=0)throw"addAction cannot accept a string with a forward slash in it - /, use .addTransformation() instead";r=new Q(e)}else r=e;return this.actions.push(r),this}addTransformation(e){return e instanceof M?this.actions=this.actions.concat(e.actions):this.actions.push(new Q(e)),this}toString(){return this.actions.map(e=>e.toString()).filter(e=>e).join("/")}animated(e){return this.addAction(e)}border(e){return this.addAction(e)}reshape(e){return this.addAction(e)}resize(e){return this.addAction(e)}quality(e){return this.addAction(new j("q",e)),this}format(e){return this.addAction(new j("f",e)),this}roundCorners(e){return this.addAction(e)}overlay(e){return this.addAction(e)}underlay(e){return e.setLayerType("u"),this.addAction(e)}addVariable(e){return this.addAction(e)}conditional(e){return this.addAction(e)}effect(e){return this.addAction(e)}adjust(e){return this.addAction(e)}rotate(e){return this.addAction(e)}namedTransformation(e){return this.addAction(e)}delivery(e){return this.addAction(e)}backgroundColor(e){return this.addAction(new ne(Be(e)))}psdTools(e){return this.addAction(e)}extract(e){return this.addAction(e)}addFlag(e){let r=new N,i=e;return typeof e=="string"&&(i=new C(e)),r.addQualifier(i),this.addAction(r)}customFunction(e){return this.addAction(e)}transcode(e){return this.addAction(e)}videoEdit(e){return this.addAction(e)}toJson(){let e=[];for(let r of this.actions){let i=r.toJson();if(He(i))return i;e.push(i)}return{actions:e}}};var ue=class extends M{};var W=class extends M{};function Je(t){return t.match(/^https?:\//)}function Ze(t){return t.indexOf("/")<0}function et(t){return t.match(/^v[0-9]+/)}function tt(t,e){let r=e.secure,i=e.privateCdn,o=e.cname,a=e.secureDistribution;return!r&&!o?`http://res.cloudinary.com/${t}`:r&&!a&&i?`https://${t}-res.cloudinary.com`:r&&!a?`https://res.cloudinary.com/${t}`:r&&a&&i?`https://${a}`:r&&a?`https://${a}/${t}`:!r&&o?`http://${o}/${t}`:"ERROR"}function rt(t){return t||"image"}function it(t){return t||"upload"}function ot(t,e,r){let i=r!==!1;return e?`v${e}`:et(t)||Je(t)||Ze(t)?"":i?"v1":""}function Y(t,e,r){let i=e>>0,o=String(typeof r!="undefined"?r:" ");return t.length>i?String(t):(i=i-t.length,i>o.length&&(o+=Qt(o,i/o.length)),o.slice(0,i)+String(t))}function Qt(t,e){let r=e,i="";for(;r>0;)i+=t,r--;return i}var Gt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",be={},nt=0;Gt.split("").forEach(t=>{let e=nt.toString(2);e=Y(e,6,"0"),be[e]=t,nt++});function st(t){if(t.split(".").length<2)throw new Error("invalid semVer, must have at least two segments");return t.split(".").reverse().map(e=>{let r=+e;if(isNaN(r)||r<0)throw"Invalid version number provided";return Y(e,2,"0")}).join(".")}function Te(t){let e="",i=t.split(".").length*6,o=st(t),n=parseInt(o.split(".").join("")).toString(2);if(n=Y(n,i,"0"),n.length%6!==0)throw"Version must be smaller than 43.21.26)";return n.match(/.{1,6}/g).forEach(l=>{e+=be[l]}),e}function at(t){let e={sdkSemver:t.sdkSemver,techVersion:t.techVersion,sdkCode:t.sdkCode,feature:"0"};return t.accessibility&&(e.feature="D"),t.lazyload&&(e.feature="C"),t.responsive&&(e.feature="A"),t.placeholder&&(e.feature="B"),e}var lt="1.9.0";function Jt(){let t="0.0.0";if(typeof window!="undefined")return t;try{return process.versions.node||t}catch(e){return t}}function Zt(t){let e={techVersion:Jt(),sdkCode:"T",sdkSemver:lt.split("-")[0],responsive:!1,placeholder:!1,lazyload:!1,accessibility:!1};return t?Object.assign(Object.assign({},e),t):e}function ut(t){let e=Zt(t),r=at(e);try{let i=er(r.techVersion),o=Te(r.sdkSemver),a=Te(i),n=r.feature;return`A${r.sdkCode}${o}${a}${n}`}catch(i){return"E"}}function er(t){let e=t.split(".");return`${e[0]}.${e[1]}`}var ft={"image/upload":"images","image/private":"private_images","image/authenticated":"authenticated_images","raw/upload":"files","video/upload":"videos"},fe=class{constructor(e,r={},i){this.setPublicID(e),this.setCloudConfig(r),this.setURLConfig(i)}setURLConfig(e){return this.urlConfig=new Fe(e),this}setCloudConfig(e){return this.cloudName=e.cloudName,this.apiKey=e.apiKey,this.apiSecret=e.apiSecret,this.authToken=e.authToken,this}setPublicID(e){return this.publicID=e?e.toString():"",this}setDeliveryType(e){return this.deliveryType=e,this}setSuffix(e){return this.suffix=e,this}setSignature(e){return this.signature=e,this}setVersion(e){return e&&(this.version=e),this}setAssetType(e){return e&&(this.assetType=e),this}sign(){return this}toURL(e={}){return this.createCloudinaryURL(null,e.trackedAnalytics)}validateAssetForURLCreation(){if(typeof this.cloudName=="undefined")throw"You must supply a cloudName when initializing the asset";let e=this.suffix&&this.suffix.indexOf(".")>=0,r=this.suffix&&this.suffix.indexOf("/")>=0;if(e||r)throw"`suffix`` should not include . or /"}getResourceType(){let e=rt(this.assetType),r=it(this.deliveryType),i=!!this.suffix,o=`${e}/${r}`,a=ft[`${e}/${r}`],n=this.urlConfig.useRootPath,l=this.urlConfig.shorten;if(n){if(o==="image/upload")return"";throw new Error(`useRootPath can only be used with assetType: 'image' and deliveryType: 'upload'. Provided: ${o} instead`)}if(l&&o==="image/upload")return"iu";if(i){if(a)return a;throw new Error(`URL Suffix only supported for ${Object.keys(ft).join(", ")}, Provided: ${o} instead`)}return o}getSignature(){return this.signature?`s--${this.signature}--`:""}createCloudinaryURL(e,r){if(!this.publicID)return"";this.validateAssetForURLCreation();let i=tt(this.cloudName,this.urlConfig),o=e?e.toString():"",a=ot(this.publicID,this.version,this.urlConfig.forceVersion),n=this.publicID.replace(/,/g,"%2C"),l=[i,this.getResourceType(),this.getSignature(),o,a,n,this.suffix].filter(s=>s).join("/");if(typeof e=="string")return l;{let s=encodeURI(l).replace(/\?/g,"%3F").replace(/=/g,"%3D");return this.urlConfig.analytics!==!1&&!n.includes("?")?`${s}?_a=${ut(r)}`:s}}};var B=class extends fe{constructor(e,r,i,o){super(e,r,i),this.transformation=o}animated(e){return this.transformation.animated(e),this}border(e){return this.transformation.border(e),this}reshape(e){return this.transformation.reshape(e),this}resize(e){return this.transformation.resize(e),this}quality(e){return this.addAction(new j("q",e)),this}format(e){return this.addAction(new j("f",e)),this}roundCorners(e){return this.transformation.roundCorners(e),this}overlay(e){return this.transformation.overlay(e),this}addVariable(e){return this.transformation.addVariable(e),this}conditional(e){return this.transformation.conditional(e),this}effect(e){return this.transformation.effect(e),this}adjust(e){return this.transformation.adjust(e),this}rotate(e){return this.transformation.rotate(e),this}namedTransformation(e){return this.transformation.namedTransformation(e),this}delivery(e){return this.transformation.delivery(e),this}backgroundColor(e){return this.transformation.backgroundColor(e),this}psdTools(e){return this.transformation.psdTools(e),this}extract(e){return this.transformation.extract(e),this}addFlag(e){return this.transformation.addFlag(e),this}customFunction(e){return this.transformation.customFunction(e),this}addAction(e){return this.transformation.addAction(e),this}addTransformation(e){return this.transformation.addTransformation(e),this}toString(){return this.transformation.toString()}underlay(e){return this.transformation.underlay(e),this}toURL(e={}){return this.createCloudinaryURL(this.transformation,e==null?void 0:e.trackedAnalytics)}};var ce=class extends B{constructor(e,r,i){super(e,r,i,new ue)}};var pe=class extends B{constructor(e,r,i){super(e,r,i,new W),this.assetType="video"}transcode(e){return this.transformation.transcode(e),this}videoEdit(e){return this.transformation.videoEdit(e),this}};var G=class{constructor(e){e&&(this.cloudinaryConfig=e)}image(e){return new ce(e,this.cloudinaryConfig.cloud,this.cloudinaryConfig.url)}video(e){return new pe(e,this.cloudinaryConfig.cloud,this.cloudinaryConfig.url)}setConfig(e){return this.cloudinaryConfig=e,this}getConfig(){return this.cloudinaryConfig}extendConfig(){}};var tr=Object.defineProperty,L=(t,e)=>{for(var r in e)tr(t,r,{get:e[r],enumerable:!0})},dt={};L(dt,{plugin:()=>ir,props:()=>rr});var Ae=["crop","fill","lfill","fill_pad","thumb"],ct=["crop","thumb"],rr=["crop","gravity","zoom"];function ir(t){let{cldImage:e,options:r}=t,{width:i,height:o,widthResize:a,crop:n="limit"}=r,l={width:void 0},s="";return i&&(s=`c_${n},w_${i}`),!r.gravity&&Ae.includes(n)&&(r.gravity="auto"),["limit"].includes(n)||(s=`${s},h_${o}`),r.gravity&&(r.gravity==="auto"&&!Ae.includes(n)?console.warn(`Auto gravity can only be used with crop modes: ${Ae.join(", ")}. Not applying gravity.`):s=`${s},g_${r.gravity}`),r.zoom&&(r.zoom==="auto"&&!ct.includes(n)?console.warn(`Zoom can only be used with crop modes: ${ct.join(", ")}. Not applying zoom.`):s=`${s},z_${r.zoom}`),e.effect(s),i&&typeof a=="number"&&a<i&&(l.width=a),{options:l}}var mt={};L(mt,{plugin:()=>nr,props:()=>or});var k={aspectRatio:{qualifier:"ar"},crop:{qualifier:"c"},gravity:{qualifier:"g"},height:{qualifier:"h"},width:{qualifier:"w"}},me={angle:{qualifier:"a"},gravity:{qualifier:"g"},x:{qualifier:"x"},y:{qualifier:"y"}},Pe={alignment:{qualifier:!1,order:6},antialias:{qualifier:"antialias"},border:{qualifier:"bo",location:"primary"},color:{qualifier:"co",location:"primary"},fontFamily:{qualifier:!1,order:1},fontSize:{qualifier:!1,order:2},fontStyle:{qualifier:!1,order:4},fontWeight:{qualifier:!1,order:3},hinting:{qualifier:"hinting"},letterSpacing:{qualifier:"letter_spacing"},lineSpacing:{qualifier:"line_spacing"},stroke:{qualifier:"self",order:7},textDecoration:{qualifier:!1,order:5}},Z={art:{prefix:"e",qualifier:"art"},autoBrightness:{prefix:"e",qualifier:"auto_brightness"},autoColor:{prefix:"e",qualifier:"auto_color"},autoContrast:{prefix:"e",qualifier:"auto_contrast"},assistColorblind:{prefix:"e",qualifier:"assist_colorblind"},background:{qualifier:"b"},blackwhite:{prefix:"e",qualifier:"blackwhite"},blur:{prefix:"e",qualifier:"blur"},blurFaces:{prefix:"e",qualifier:"blur_faces"},blurRegion:{prefix:"e",qualifier:"blur_region"},border:{qualifier:"bo"},brightness:{prefix:"e",qualifier:"brightness"},brightnessHSB:{prefix:"e",qualifier:"brightness_hsb"},cartoonify:{prefix:"e",qualifier:"cartoonify"},color:{qualifier:"co"},colorize:{prefix:"e",qualifier:"colorize"},contrast:{prefix:"e",qualifier:"contrast"},distort:{prefix:"e",qualifier:"distort"},fillLight:{prefix:"e",qualifier:"fill_light"},gamma:{prefix:"e",qualifier:"gamma"},gradientFade:{prefix:"e",qualifier:"gradient_fade"},grayscale:{prefix:"e",qualifier:"grayscale"},improve:{prefix:"e",qualifier:"improve"},multiply:{prefix:"e",qualifier:"multiply"},negate:{prefix:"e",qualifier:"negate"},oilPaint:{prefix:"e",qualifier:"oil_paint"},opacity:{qualifier:"o"},outline:{prefix:"e",qualifier:"outline"},overlay:{prefix:"e",qualifier:"overlay"},pixelate:{prefix:"e",qualifier:"pixelate"},pixelateFaces:{prefix:"e",qualifier:"pixelate_faces"},pixelateRegion:{prefix:"e",qualifier:"pixelate_region"},redeye:{prefix:"e",qualifier:"redeye"},replaceColor:{prefix:"e",qualifier:"replace_color"},saturation:{prefix:"e",qualifier:"saturation"},screen:{prefix:"e",qualifier:"screen"},sepia:{prefix:"e",qualifier:"sepia"},shadow:{prefix:"e",qualifier:"shadow"},sharpen:{prefix:"e",qualifier:"sharpen"},shear:{prefix:"e",qualifier:"shear"},simulateColorblind:{prefix:"e",qualifier:"simulate_colorblind"},tint:{prefix:"e",qualifier:"tint"},unsharpMask:{prefix:"e",qualifier:"unsharp_mask"},vectorize:{prefix:"e",qualifier:"vectorize"},vibrance:{prefix:"e",qualifier:"vibrance"},vignette:{prefix:"e",qualifier:"vignette"}},pt={relative:{prefix:"fl",qualifier:"relative",location:"primary"}};function J({prefix:t,qualifier:e,value:r}){let i="";if(t&&(i=`${t}_`),r===!0||r==="true")return`${i}${e}`;if(typeof r=="string"||typeof r=="number")return t?`${i}${e}:${r}`:`${e}_${r}`}var or=[...Object.keys(Z),"effects"];function nr(t){let{cldImage:e,options:r}=t;o({effects:Z,options:r}).filter(a=>!!a).forEach(a=>e.effect(a)),Array.isArray(r==null?void 0:r.effects)&&(r==null||r.effects.forEach(a=>{let n=o({effects:Z,options:a}).filter(l=>!!l).join(",");e.effect(n)}));function o({effects:a,options:n}){return Object.keys(a).map(l=>{let{prefix:s,qualifier:f}=a[l];return J({qualifier:f,prefix:s,value:n==null?void 0:n[l]})})}return{}}var ht={};L(ht,{plugin:()=>ar,props:()=>sr});var sr=["sanitize"];function ar(t){let{cldImage:e,options:r}=t,{sanitize:i=!0}=r;return i&&(r.format==="svg"||e.publicID.endsWith(".svg"))&&e.effect("fl_sanitize"),{}}var gt={};L(gt,{DEFAULT_TEXT_OPTIONS:()=>de,plugin:()=>ur,props:()=>lr});var lr=["text","overlays"],de={color:"black",fontFamily:"Arial",fontSize:200,fontWeight:"bold"};function ur(t){let{cldImage:e,options:r}=t,{text:i,overlays:o=[]}=r,a="overlay",n="l";Array.isArray(o)&&o.forEach(l),typeof i=="string"?l({text:{...de,text:i}}):typeof i=="object"&&l({text:{...de,...i}});function l({publicId:s,url:f,position:d,text:c,effects:U=[],appliedEffects:_=[],...$}){let x=typeof s=="string",b=typeof f=="string",w=typeof c=="object"||typeof c=="string",m=typeof d=="object";if(!x&&!b&&!w){console.warn(`An ${a} is missing Public ID, URL, or Text`);return}let u;w?u=`${n}_text`:x?u=`${n}_${s.replace(/\//g,":")}`:b&&(u=`${n}_fetch:${je(f)}`);let h=[],v=[];if(Object.keys($).forEach(p=>{if(!T(k,p))return;let{qualifier:g}=k[p],O=J({qualifier:g,value:$[p]});O&&h.push(O)}),U.forEach(p=>{Object.keys(p).forEach(g=>{let{qualifier:O,prefix:y}=k[g]||Z[g]||{},P=J({qualifier:O,prefix:y,value:p[g]});P&&h.push(P)})}),_.forEach(p=>{Object.keys(p).forEach(g=>{let{qualifier:O,prefix:y}=k[g]||Z[g]||{},P=J({qualifier:O,prefix:y,value:p[g]});P&&v.push(P)})}),w){typeof c=="string"&&(c={...de,text:c});let p=[];if(typeof c=="object"){let g=Object.keys(c).filter(y=>T(Pe,y)).map(y=>{let P=c&&T(c,y)&&c[y];return{...Pe[y],key:y,value:P,order:Pe[y].order||99}}),O=Me(g,"order");for(let y of O){let{key:P,value:H,qualifier:F,location:q}=y;q==="primary"?h.push(`${F}_${H}`):F==="self"?p.push(P):F?p.push(`${F}_${H}`):p.push(H)}}u=`${u}:${p.join("_")}:${c==null?void 0:c.text}`}m&&Object.keys(d).forEach(p=>{if(!T(me,p))return;let{qualifier:g}=me[p],O=J({qualifier:g,value:d[p]});O&&v.push(O)}),h.length>0&&(u=`${u},${h.join(",")}`),u=`${u}/fl_layer_apply,fl_no_overflow`,v.length>0&&(u=`${u},${v.join(",")}`),e.addTransformation(u)}return{}}var yt={};L(yt,{plugin:()=>cr,props:()=>fr});var fr=["transformations"];function cr(t){let{cldImage:e,options:r}=t,{transformations:i=[]}=r;return Array.isArray(i)||(i=[i]),i.forEach(o=>{e.addTransformation(`t_${o}`)}),{}}var _t={};L(_t,{plugin:()=>dr,props:()=>pr});var pr=["rawTransformations"];function dr(t){let{cldImage:e,options:r}=t,{rawTransformations:i=[]}=r;return i.forEach(o=>{e.addTransformation(o)}),{}}var vt={};L(vt,{plugin:()=>hr,props:()=>mr});var mr=["removeBackground"];function hr(t){let{cldImage:e,options:r}=t,{removeBackground:i=!1}=r;return i&&e.effect("e_background_removal"),{}}var xt={};L(xt,{plugin:()=>yr,props:()=>gr});var gr=["seoSuffix"];function yr(t){let{cldImage:e,options:r}=t,{seoSuffix:i}=r;return typeof i=="string"&&e.setSuffix(i),{}}var Ct={};L(Ct,{plugin:()=>vr,props:()=>_r});var _r=["underlay","underlays"];function vr(t){let{cldImage:e,options:r}=t,{underlay:i,underlays:o=[]}=r,a="u";Array.isArray(o)&&o.forEach(n),typeof i=="string"&&n({publicId:i,crop:"fill",width:"1.0",height:"1.0",flags:["relative"]});function n({publicId:l,type:s,position:f,effects:d=[],flags:c=[],...U}){let _=typeof l=="string",$=typeof f=="object";if(!_){console.warn(`An ${s} is missing a Public ID`);return}let x=`${a}_${l.replace(/\//g,":")}`,b=[],w=[];Object.keys(U).forEach(m=>{if(!T(k,m))return;let{qualifier:u}=k[m];b.push(`${u}_${U[m]}`)}),d.forEach(m=>{Object.keys(m).forEach(u=>{if(!T(k,u))return;let{qualifier:h}=k[u];b.push(`${h}_${m[u]}`)})}),$&&Object.keys(f).forEach(m=>{if(!T(me,m))return;let{qualifier:u}=me[m];w.push(`${u}_${f[m]}`)}),c.forEach(m=>{if(!T(pt,m))return;let{qualifier:u,prefix:h}=pt[m];b.push(`${h}_${u}`)}),x=`${x},${b.join(",")}`,x=`${x}/fl_layer_apply,fl_no_overflow`,w.length>0&&(x=`${x},${w.join(",")}`),e.addTransformation(x)}return{}}var wt={};L(wt,{plugin:()=>Cr,props:()=>xr});var xr=["version"];function Cr(t){let{cldImage:e,options:r}=t,{version:i}=r;return(typeof i=="string"||typeof i=="number")&&e.setVersion(`${i}`.replace("v","")),{}}var Ot={};L(Ot,{plugin:()=>Or,props:()=>wr});var wr=["zoompan"];function Or(t){let{cldImage:e,options:r}=t,{zoompan:i=!1}=r,o={format:void 0};if(i===!0)e.effect("e_zoompan");else if(typeof i=="string")i==="loop"?(e.effect("e_zoompan"),e.effect("e_loop")):e.effect(`e_zoompan:${i}`);else if(typeof i=="object"){let a="e_zoompan";typeof i.options=="string"&&(a=`${a}${i.options}`),e.effect(a);let n;i.loop===!0?n="e_loop":typeof i.loop=="string"&&(n=`e_loop${i.loop}`),n&&e.effect(n)}return i!==!1&&(o.format="gif"),{options:o}}var Se=[vt,dt,mt,gt,ht,yt,xt,Ct,wt,Ot,_t],Ie;function he({options:t,config:e,analytics:r}){if(Ie||(Ie=new G(e)),!(t!=null&&t.src))throw Error("Failed to construct Cloudinary URL: Missing source (src) in options");let i={seoSuffix:void 0,version:void 0},o;if(t.src.startsWith("https://"))try{let n=Ce(t.src);o=n==null?void 0:n.publicId,i.seoSuffix=n==null?void 0:n.seoSuffix,i.version=n==null?void 0:n.version}catch(n){}o||(o=t.src),Object.keys(i).forEach(n=>{T(t,n)||(t[n]=i[n])});let a=Ie.image(o);if(Se.forEach(({plugin:n})=>{let l=n({cldImage:a,options:t}),{options:s}=l||{options:void 0};s!=null&&s.format&&t&&(t.format=s.format),s!=null&&s.width&&t&&(t.resize={width:s==null?void 0:s.width})}),t!=null&&t.resize){let{width:n,crop:l="scale"}=t.resize;a.effect(`c_${l},w_${n}`)}return a.setDeliveryType((t==null?void 0:t.deliveryType)||"upload").format((t==null?void 0:t.format)||"auto").delivery(`q_${(t==null?void 0:t.quality)||"auto"}`).toURL({trackedAnalytics:r})}async function Le(t){let{src:e}=t;try{await new Promise((r,i)=>{fetch(e).then(o=>{if(!o.ok){i(o);return}r(o)})})}catch(r){return r.status===423?await Le(t):!1}return!0}var bt=I(require("next/package.json"));var Et={name:"next-cloudinary",version:"3.4.0",main:"./dist/index.js",module:"./dist/index.mjs",types:"./dist/index.d.ts",source:"src/index.ts",scripts:{build:"tsup src/index.ts --dts",dev:"tsup src/index.ts --watch --dts",prepublishOnly:"cp ../README.md . && yarn build",postpublish:"rm ./README.md",test:"jest","test:app":'NEXT_PUBLIC_CLOUDINARY_CLOUD_NAME="test" yarn build && cd tests/nextjs-app && yarn build'},dependencies:{"@cloudinary-util/url-loader":"^2.0.0","@cloudinary-util/util":"^2.0.0","@cloudinary/url-gen":"^1.8.6"},devDependencies:{"@babel/core":"^7.19.6","@babel/preset-env":"^7.19.4","@types/jest":"^29.2.0","@types/react":"^18.0.28","@types/react-dom":"^18.0.11","babel-jest":"^29.2.2",dotenv:"^16.0.3",jest:"^29.2.2","jest-environment-jsdom":"^29.2.2","ts-jest":"^29.0.3",tsup:"^6.6.3",typescript:"^4.9.4"},peerDependencies:{next:"^12 || ^13",react:"^17 || ^18"}};var ge="V",ye=Et.version,_e=bt.default.version;function ve({loaderOptions:t,imageProps:e,cldOptions:r,cldConfig:i={}}){let o={...e,...r};if(o.width=typeof o.width=="string"?parseInt(o.width):o.width,o.height=typeof o.height=="string"?parseInt(o.height):o.height,typeof(t==null?void 0:t.width)=="number"&&typeof o.width=="number"&&t.width!==o.width){let a=t.width/o.width;o.widthResize=t.width,typeof o.height=="number"&&(o.heightResize=Math.round(o.height*a))}return he({options:o,config:{cloud:{cloudName:process.env.NEXT_PUBLIC_CLOUDINARY_CLOUD_NAME},...i},analytics:{sdkCode:ge,sdkSemver:ye,techVersion:_e,feature:""}})}var br=t=>{let e=["deliveryType","preserveTransformations"];Se.forEach(({props:s=[]})=>{s.forEach(f=>{if(e.includes(f))throw new Error(`Option ${f} already exists!`);e.push(f)})});let r={alt:t.alt,src:t.src};Object.keys(t).filter(s=>!e.includes(s)).forEach(s=>r[s]=t[s]);let i=Object.keys(r).map(s=>`${s}:${r[s]}`).join(";"),[o,a]=(0,xe.useState)(i),n={};if(e.forEach(s=>{t[s]&&(n[s]=t[s]||void 0)}),t.preserveTransformations)try{let s=Ve(t.src);n.rawTransformations=[...s.flat(),...t.rawTransformations||[]]}catch(s){console.warn(`Failed to preserve transformations: ${s.message}`)}async function l(s){await Le({src:s.target.src})&&a(`${i};${Date.now()}`)}return xe.default.createElement(Tt.default,{key:o,...r,loader:s=>ve({loaderOptions:s,imageProps:r,cldOptions:n}),onError:l})},Ue=br;var R=I(require("react")),At=I(require("next/head"));var Tr=2400,Ar=1200,Pr="summary_large_image",Ir=({excludeTags:t=[],twitterTitle:e,...r})=>{let i={...r,alt:r.alt,crop:r.crop||"fill",gravity:r.gravity||"center",height:r.height||Ar,src:r.src,width:r.width||Tr},o=he({options:i,config:{cloud:{cloudName:process.env.NEXT_PUBLIC_CLOUDINARY_CLOUD_NAME}},analytics:{sdkCode:ge,sdkSemver:ye,techVersion:_e,feature:""}});return R.default.createElement(At.default,null,R.default.createElement("meta",{property:"og:image",content:o}),R.default.createElement("meta",{property:"og:image:secure_url",content:o}),R.default.createElement("meta",{property:"og:image:width",content:`${i.width}`}),R.default.createElement("meta",{property:"og:image:height",content:`${i.height}`}),i.alt&&R.default.createElement("meta",{property:"og:image:alt",content:i.alt}),!t.includes("twitter:title")&&R.default.createElement("meta",{property:"twitter:title",content:e||" "}),R.default.createElement("meta",{property:"twitter:card",content:Pr}),R.default.createElement("meta",{property:"twitter:image",content:o}))},$e=Ir;var te=I(require("react"));var E=I(require("react")),It=I(require("next/script"));function Pt(t){return window&&"requestIdleCallback"in window?requestIdleCallback(t):setTimeout(()=>t(),1)}var Sr=["success","display-changed"],Lr=({children:t,onClose:e,onError:r,onOpen:i,onUpload:o,options:a,signatureEndpoint:n,uploadPreset:l})=>{let s=(0,E.useRef)(),f=(0,E.useRef)(),d=!!n,[c,U]=(0,E.useState)(void 0),[_,$]=(0,E.useState)(void 0);(0,E.useEffect)(()=>{if(typeof _=="undefined")return;let u=_.event==="success",h=_.event==="display-changed"&&_.info==="hidden";u&&typeof o=="function"&&o(_,f.current),h&&typeof e=="function"&&e(f.current)},[_]),(0,E.useEffect)(()=>{c&&typeof r=="function"&&r(c,f.current)},[c]);function x(){s.current||(s.current=window.cloudinary),Pt(()=>{f.current||(f.current=w())})}function b(u,h){if(typeof n=="undefined")throw Error("Failed to generate signature: signatureEndpoint undefined.");fetch(n,{method:"POST",body:JSON.stringify({paramsToSign:h})}).then(v=>v.json()).then(({signature:v})=>{u(v)})}function w(){var h;let u={cloudName:process.env.NEXT_PUBLIC_CLOUDINARY_CLOUD_NAME,uploadPreset:l||process.env.NEXT_PUBLIC_CLOUDINARY_UPLOAD_PRESET,apiKey:process.env.NEXT_PUBLIC_CLOUDINARY_API_KEY,...a};return d&&(u.uploadSignature=b,!u.apiKey)?new Error("Signed Upload needs apiKey!"):(h=s.current)==null?void 0:h.createUploadWidget(u,(v,p)=>{typeof v!="undefined"&&U(v),Sr.includes(p==null?void 0:p.event)&&$(p)})}function m(){f.current||(f.current=w()),f==null||f.current.open(),typeof i=="function"&&i(f.current)}return E.default.createElement(E.default.Fragment,null,typeof t=="function"&&t({cloudinary:s.current,widget:f.current,open:m,results:_,error:c}),E.default.createElement(It.default,{id:`cloudinary-uploadwidget-${Math.floor(Math.random()*100)}`,src:"https://widget.cloudinary.com/v2.0/global/all.js",onLoad:x,onError:u=>console.error(`Failed to load Cloudinary Upload Widget: ${u.message}`)}))},ee=Lr;var Ur=({children:t,onClick:e,onError:r,onUpload:i,options:o,signatureEndpoint:a,uploadPreset:n,...l})=>te.default.createElement(te.default.Fragment,null,te.default.createElement(ee,{onError:r,onUpload:i,options:o,signatureEndpoint:a,uploadPreset:n},({open:s})=>{function f(d){d.preventDefault(),s(),typeof e=="function"&&e(d)}return te.default.createElement("button",{...l,onClick:f},t||"Upload")})),qe=Ur;var A=I(require("react")),St=I(require("next/script")),Lt=I(require("next/head")),$r=t=>{let{autoPlay:e="never",colors:r,controls:i=!0,fontFace:o,height:a,id:n,logo:l=!0,loop:s=!1,muted:f=!1,onDataLoad:d,onError:c,onMetadataLoad:U,onPause:_,onPlay:$,onEnded:x,src:b,version:w="1.9.4",width:m}=t,u=(0,A.useRef)(),h=(0,A.useRef)(),v=t.videoRef||h,p=(0,A.useRef)(),g=t.playerRef||p,O=n||`player-${b.replace("/","-")}`,y={error:c,loadeddata:d,loadedmetadata:U,pause:_,play:$,ended:x};function P(q){let K=y[q.type];typeof K=="function"&&K(F())}function H(){if("cloudinary"in window){u.current=window.cloudinary;let q={};typeof l=="boolean"?q.showLogo=l:typeof l=="object"&&(q={...q,showLogo:!0,logoImageUrl:l.imageUrl,logoOnclickUrl:l.onClickUrl}),g.current=u.current.videoPlayer(v.current,{autoplayMode:e,cloud_name:process.env.NEXT_PUBLIC_CLOUDINARY_CLOUD_NAME,color:r,controls:i,fontFace:o||"",loop:s,muted:f,publicId:b,secure:!0,...q}),Object.keys(y).forEach(K=>{var Re;typeof y[K]=="function"&&((Re=g.current)==null||Re.on(K,P))})}}function F(){return{player:g.current,video:v.current}}return A.default.createElement(A.default.Fragment,null,A.default.createElement(Lt.default,null,A.default.createElement("link",{href:`https://unpkg.com/cloudinary-video-player@${w}/dist/cld-video-player.min.css`,rel:"stylesheet"})),A.default.createElement("div",{style:{width:"100%",aspectRatio:`${t.width} / ${t.height}`}},A.default.createElement("video",{ref:v,id:O,className:"cld-video-player cld-fluid",width:m,height:a}),A.default.createElement(St.default,{id:`cloudinary-videoplayer-${Math.floor(Math.random()*100)}`,src:`https://unpkg.com/cloudinary-video-player@${w}/dist/cld-video-player.min.js`,onLoad:H,onError:q=>console.error(`Failed to load Cloudinary Video Player: ${q.message}`)})))},De=$r;0&&(module.exports={CldImage,CldOgImage,CldUploadButton,CldUploadWidget,CldVideoPlayer,cloudinaryLoader});
//# sourceMappingURL=index.js.map